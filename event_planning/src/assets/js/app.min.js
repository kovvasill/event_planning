!function(){"use strict";angular.module("app",["ngComponentRouter","ngResource","app.main"]).value("$routerRootComponent","appMain")}(),function(){"use strict";angular.module("app.main",["app.events","app.about","app.login","app.cities"])}(),function(){"use strict";angular.module("app.login",["app.events"])}(),function(){"use strict";angular.module("app.about",[])}(),function(){"use strict";angular.module("app.cities",[])}(),function(){"use strict";angular.module("app.events",[]).component("events",{template:"<ng-outlet></ng-outlet>",$routeConfig:[{path:"/",name:"EventList",component:"eventList",useAsDefault:!0},{path:"/:id",name:"EventDetail",component:"eventDetail"}]})}(),function(){"use strict";function e(){var e=this;e.GetYear=function(){var e=new Date;return e.getFullYear()}}angular.module("app.about").component("about",{templateUrl:"src/app/components/about/about.template.html",controller:e,$routeConfig:[{path:"/",name:"About",component:"about",useAsDefault:!0}]})}(),function(){"use strict";function e(e){var t=this;t.Cities=e.query()}angular.module("app.cities").component("cities",{templateUrl:"src/app/components/cities/cities.template.html",controller:e,$routeConfig:[{path:"/",name:"Cities",component:"cities",useAsDefault:!0}]}),e.$inject=["CitiesService"]}(),function(){"use strict";function e(e,t,n){var r=this;t.InitUsers().then(function(){},function(e){}),r.errorText="",r.userID="",r.password="",r.logedInUser=n,r.LogInUser=function(){e.StringIsEmpty(r.userID)?r.errorText="User ID is required":t.LogInUser(r.userID,r.password)||(r.errorText="User ID or password is incorrect")},r.LogOutUser=function(){t.LogOutUser()}}angular.module("app.login").component("login",{templateUrl:"src/app/components/login/login.template.html",bindings:{$router:"<"},controller:e,$routeConfig:[{path:"/",name:"Login",component:"login",useAsDefault:!0}]}),e.$inject=["UtilityService","UsersService","logedInUser"]}(),function(){"use strict";function e(e){var t=this;t.IsUserLoggedIn=e.IsUserLoggedIn,t.GetUserFullName=e.GetUserFullName}angular.module("app.main").component("appMain",{templateUrl:"/src/app/components/main/main.template.html",controller:e,$routeConfig:[{path:"/events/...",name:"Events",component:"events",useAsDefault:!0},{path:"/events/:id",name:"EventDetail",component:"eventDetail"},{path:"/about/...",name:"About",component:"about"},{path:"/cities/...",name:"Cities",component:"cities"},{path:"/login/...",name:"Login",component:"login"},{path:"/heroes/...",name:"Heroes",component:"heroes"}]}),e.$inject=["UsersService"]}(),function(){"use strict";angular.module("app").factory("CitiesService",["$resource",function(e){return e("http://localhost:36275/api/cities",{},{query:{method:"GET",params:{},isArray:!0}})}])}(),function(){"use strict";angular.module("app").constant("uniqueKeyIDs",{userKeyID:4,eventKeyID:4}),angular.module("app").value("logedInUser",{keyID:0,userID:"",password:"",firstName:"",lastName:"",age:0}),angular.module("app").factory("UsersService",["$q","$http","$rootScope","UtilityService","logedInUser","uniqueKeyIDs",function(e,t,n,r,o,a){var s={},i=parseInt(r.GetLocalStorage("USER_UNIQUE_KEY_ID"));i||(i=a.userKeyID);var u=function(){return s.users},c=function(e){s=e},l=function(e){e.keyID=i,i++,s.users.push(e)},p=function(){r.SetLocalStorage("USER_UNIQUE_KEY_ID",i),r.SetLocalStorage("USERS",angular.toJson(s))},m=function(){var o=e.defer();if(n.usersWasInit)o.resolve("done");else{var a=angular.fromJson(r.GetLocalStorage("USERS"));null!=a?(s=a,n.usersWasInit=!0,o.resolve("done")):t.get("src/assets/data/defaultUsers.json").success(function(e){c(e),n.usersWasInit=!0,o.resolve("done")}).error(function(e){o.reject(e)})}return o.promise},v=function(e,t){for(var n=!1,r=0,a=u().length;a>r;r++)if(u()[r].userID===e&&u()[r].password===t){o.keyID=u()[r].keyID,o.userID=u()[r].userID,o.password=u()[r].password,o.firstName=u()[r].firstName,o.lastName=u()[r].lastName,o.age=u()[r].age,n=!0;break}return n},f=function(){o.keyID=0,o.userID="",o.password="",o.firstName="",o.lastName="",o.age=0},g=function(){return!r.StringIsEmpty(o.userID)},d=function(){return o.firstName+" "+o.lastName};return{AddUser:l,SaveUsers:p,InitUsers:m,LogInUser:v,LogOutUser:f,IsUserLoggedIn:g,GetUserFullName:d}}]),angular.module("app").factory("EventsService",["$q","$http","$rootScope","UtilityService","uniqueKeyIDs",function(e,t,n,r,o){var a={},s=parseInt(r.GetLocalStorage("EVENT_UNIQUE_KEY_ID"));s||(s=o.eventKeyID);var i=function(){return a.events},u=function(e){var t=null,n=i();if(n)for(var r=0,o=n.length;o>r;r++)if(n[r].keyID==e){t=n[r];break}return t},c=function(e){a=e},l=function(e){e.keyID=s,s++,a.events.push(e)},p=function(){r.SetLocalStorage("EVENT_UNIQUE_KEY_ID",s),r.SetLocalStorage("EVENTS",angular.toJson(a))},m=function(){var o=e.defer();if(n.eventsWasInit)o.resolve("done");else{var s=angular.fromJson(r.GetLocalStorage("EVENTS"));null!=s?(a=s,n.eventsWasInit=!0,o.resolve("done")):t.get("src/assets/data/defaultEvents.json").success(function(e){c(e),n.eventsWasInit=!0,o.resolve("done")}).error(function(e){o.reject(e)})}return o.promise};return{GetEvents:i,GetEventByKeyID:u,AddEvent:l,SaveEvents:p,InitEvents:m}}])}(),function(){"use strict";angular.module("app").factory("UtilityService",function(){function e(e){return"ev_pl_"+e}function t(t){return localStorage.getItem(e(t))}function n(t,n){return localStorage.setItem(e(t),n)}function r(e){return!e||/^\s*$/.test(e)||0===e.length||!e.trim()}var o=function(e){return 0===Object.keys(e).length},a=function(e,t,n,r){var o=a.canvas||(a.canvas=document.createElement("canvas")),s=o.getContext("2d");s.font=t;var i=s.measureText(e),u=i.width+IE_TXT_EXTRA_SPACE;return n>u?u=n:u>r&&(u=r),u},s=function(e){if(""!=e){var t=new Date(e),n=t.getUTCFullYear().toString(),r=(t.getUTCMonth()+1).toString(),o=t.getUTCDate().toString(),a=(o[1]?o:"0"+o[0])+"-"+(r[1]?r:"0"+r[0])+"-"+n,s=t.getUTCHours().toString();r=t.getUTCMinutes().toString();var i=(s[1]?s:"0"+s[0])+":"+(r[1]?r:"0"+r[0]);return a+" "+i}return""};return{GetLocalStorage:t,SetLocalStorage:n,StringIsEmpty:r,ObjIsEmpty:o,GetTextWidth:a,GetFormatedDateTime:s}})}(),function(){"use strict";function e(e,t){var n=this;n.errorText="",n.evtName="",n.evtDate=new Date,n.evtDate.setHours(n.evtDate.getHours()+2),n.evtDate.setSeconds(0),n.evtDate.setMilliseconds(0),n.evtDescription="",n.evtPrice=0,n.btnText="Save";var r;this.$routerOnActivate=function(t){if(r=t.params.id,r>0){var o=e.GetEventByKeyID(r);o&&(n.evtName=o.name,n.evtDate=new Date(o.date),n.evtDate.setSeconds(0),n.evtDate.setMilliseconds(0),n.evtDescription=o.description,n.evtPrice=o.price,n.btnText="Update")}},n.Save=function(){if(t.StringIsEmpty(n.evtName))n.errorText="Name is required";else if(new Date(n.evtDate)<=new Date)n.errorText="Please set date in future";else if(r>0){var o=e.GetEventByKeyID(r);o.name=n.evtName,o.date=n.evtDate,o.description=n.evtDescription,o.price=n.evtPrice,e.SaveEvents(),this.$router.navigate(["EventList"])}else e.AddEvent({name:n.evtName,date:n.evtDate,description:n.evtDescription,price:n.evtPrice,owner:1001,rate:3}),e.SaveEvents(),this.$router.navigate(["EventList"])}}angular.module("app.events").component("eventDetail",{templateUrl:"src/app/components/events/eventDetail/eventDetail.template.html",bindings:{$router:"<"},controller:e}),e.$inject=["EventsService","UtilityService"]}(),function(){"use strict";function e(e,t){var n=this;e.InitEvents().then(function(){},function(e){}),n.GetEvents=e.GetEvents,n.EventClosed=function(e){var n=t(new Date,"d/M/yyyy h:mm:ss"),r=t(new Date(e),"d/M/yyyy h:mm:ss"),o=moment(r,"DD/MM/YYYY HH:mm:ss").diff(moment(n,"DD/MM/YYYY HH:mm:ss"));return 0>o},n.IsEventsFiltering=function(){}}angular.module("app.events").component("eventList",{templateUrl:"src/app/components/events/eventList/eventList.template.html",controller:e}),e.$inject=["EventsService","dateFilter"]}(),function(){"use strict";function e(){}angular.module("app").component("alertBar",{templateUrl:"src/app/shared/directives/alertBar/alertBarView.html",controller:e,bindings:{alertMsg:"<"}})}(),function(){"use strict";angular.module("app").directive("timeToLeft",["$interval","dateFilter",function(e,t){return{restrict:"A",templateUrl:"src/app/shared/directives/timeToLeft/timeToLeftView.html",link:function(n,r,o){function a(){if(s){var e=t(new Date,"d/M/yyyy h:mm:ss"),r=t(new Date(s),"d/M/yyyy h:mm:ss"),o=moment(r,"DD/MM/YYYY HH:mm:ss").diff(moment(e,"DD/MM/YYYY HH:mm:ss")),a="";if(o>0){var i=moment.duration(o);a=Math.floor(i.asHours())+moment.utc(o).format(":mm:ss"),i.asHours()<=4&&(n.soonEvt=!0)}n.ttLeft=a}}var s,i;n.ttLeft="",n.soonEvt=!1,n.$watch(o.timeToLeft,function(e){s=e,a()}),i=e(a,3e3),r.on("$destroy",function(){e.cancel(i)})}}}])}();